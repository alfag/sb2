{% extends "layout.njk" %}

{% block title %}Benvenuto in SharingBeer 2.0{% endblock %}

{% block head %}
<link rel="stylesheet" href="/css/tailwind-input.css">
<link rel="stylesheet" href="/css/breweriesModule.css">
{% endblock %}

{% block content %}
<!-- Minimal Welcome Container -->
<div class="max-w-6xl mx-auto px-4 py-6">
    
    <!-- Hero Section - Compact -->
    <div class="mb-8">
        <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">
            {% if user %}Ciao {{ user.username }}{% else %}Benvenuto su SharingBeer{% endif %}
        </h1>
        <p class="text-gray-600">
            {% if user %}Condividi, scopri e vivi la birra artigianale{% else %}La community per gli amanti della birra artigianale{% endif %}
        </p>
    </div>

    <!-- Quick Actions - Minimal -->
    {% if not user or (user and 'customer' in user.role) %}
    <section class="mb-8">
        <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg p-6">
            <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                <div class="flex items-center gap-3">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C9 4.5 9 4.5 9 4.5l-3 1.5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-2l-3-1.5S15 4.5 12 4.5z"/>
                    </svg>
                    <div>
                        <div class="font-semibold text-lg">Recensisci una birra</div>
                        <div class="text-sm opacity-90">Scatta, analizza, condividi</div>
                    </div>
                </div>
                <button id="start-review-process" class="px-6 py-2.5 bg-white text-green-600 font-semibold rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap">
                    Inizia ora
                </button>
            </div>
        </div>
        
        {% include 'customer/review.njk' %}
        
        <!-- Review Process Area - Minimal -->
        <div id="review-process" class="hidden mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200">
            <div id="ai-feedback" class="mb-4"></div>
            <div id="image-preview" class="mb-4"></div>
            <div id="bottle-ratings" class="mb-4"></div>
            <div class="flex gap-3 justify-end">
                <button id="restart-review" class="px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors">
                    Ricomincia
                </button>
                <button id="publish-review" class="px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors">
                    Pubblica
                </button>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Breweries Section - Minimal -->
    <section class="mb-8">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-2xl font-bold text-gray-900">Birrifici</h2>
            {% if user and 'brewery' in user.role %}
                <a href="/brewery/dashboard" class="text-sm text-blue-600 hover:text-blue-700 font-medium">
                    Dashboard â†’
                </a>
            {% endif %}
        </div>
        <div id="brewery-list">
            <!-- Dynamic brewery content will be inserted here -->
        </div>
    </section>

    <!-- Auth Section - Only for guests -->
    {% if not user %}
    <section class="mb-8">
        <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg p-6">
            <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                <div>
                    <h3 class="text-xl font-bold mb-1">Unisciti alla community</h3>
                    <p class="text-sm opacity-90">Scopri, condividi e vivi la birra artigianale</p>
                </div>
                <div class="flex gap-3">
                    <a href="/register" class="px-5 py-2 bg-white text-purple-700 font-semibold text-sm rounded-lg hover:bg-gray-50 transition-colors">
                        Registrati
                    </a>
                    <a href="/login" class="px-5 py-2 border-2 border-white text-white font-semibold text-sm rounded-lg hover:bg-white hover:text-purple-700 transition-colors">
                        Accedi
                    </a>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Features - Minimal Grid -->
    <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Caratteristiche</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white border border-gray-200 rounded-lg p-5 hover:border-blue-300 transition-colors">
                <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mb-3">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="text-blue-600">
                        <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 5.5V6.5C15 7.3 14.3 8 13.5 8H10.5C9.7 8 9 7.3 9 6.5V5.5L3 7V9H21ZM18 10H6C4.9 10 4 10.9 4 12V22H7V19H17V22H20V12C20 10.9 19.1 10 18 10Z"/>
                    </svg>
                </div>
                <h3 class="font-bold text-gray-900 mb-2">AI Reviews</h3>
                <p class="text-sm text-gray-600">Analisi automatica delle birre tramite foto</p>
            </div>
            <div class="bg-white border border-gray-200 rounded-lg p-5 hover:border-amber-300 transition-colors">
                <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center mb-3">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="text-amber-600">
                        <path d="M19 7h-3V6a4 4 0 0 0-8 0v1H5a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM10 6a2 2 0 0 1 4 0v1h-4V6zm8 13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v10z"/>
                    </svg>
                </div>
                <h3 class="font-bold text-gray-900 mb-2">Birrifici Locali</h3>
                <p class="text-sm text-gray-600">Scopri e supporta i produttori artigianali</p>
            </div>
            <div class="bg-white border border-gray-200 rounded-lg p-5 hover:border-green-300 transition-colors">
                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mb-3">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="text-green-600">
                        <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6h-6z"/>
                    </svg>
                </div>
                <h3 class="font-bold text-gray-900 mb-2">Analytics</h3>
                <p class="text-sm text-gray-600">Statistiche dettagliate e trends</p>
            </div>
        </div>
    </section>
</div>

{% endblock %}

{% if showDisclaimer %}
  {% include "partials/disclaimer.njk" %}
{% endif %}