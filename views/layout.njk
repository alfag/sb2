<!DOCTYPE html>
<html lang="it">

<head>
    <meta http-equiv="content-type; X-UA-Compatible"
        content="text/html; IE=edge; charset=UTF-8; X-Content-Type-Options=nosniff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/toggle.css">
</head>

<body style="display: flex; flex-direction: column; min-height: 100vh;">
    <!-- Gestione dei message -->
    {% if message %}
    {% if message.error %}
    <div class="alert alert-danger">
        {{ message.error }}
    </div>
    <script>
        console.error('Errore dal server:', '{{ message.error | escapejs }}');
    </script>
    {% endif %}
    {% if message.info %}
    <div class="alert alert-info">
        {{ message.info }}
    </div>
    {% endif %}
    {% if message.warning %}
    <div class="alert alert-warning">
        {{ message.warning }}
    </div>
    {% endif %}
    {% endif %}
    <header>
        <h1>{% block header %}{% endblock %}</h1>
    </header>
    <main style="flex: 1;">
        {% block content %}{% endblock %}
    </main>
    <footer style="width: 100%;">
        <table width="100%" style="border-top: 1px solid black; vertical-align:middle;">
            <tr>
                <td width="10%" style="text-align: center; font-size: 14px; color: #000;">
                    <a class="navbar-brand" style="font-size:14px; color: #000; text-decoration: none;" href="/">
                        <div>
                            <svg style="vertical-align:bottom" xmlns="http://www.w3.org/2000/svg" width="36px"
                                height="36px" fill="#000" viewbox="0 0 24 24">
                                <path
                                    d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" />
                                <title>Home</title>
                            </svg>
                        </div>
                        <div>
                            Home
                        </div>
                    </a>
                </td>
                <td width="70" style="text-align: center; font-size: 14px; color: #000;">
                    {% if user %}
                    {% if user.role == 'administrator' %}
                    {% include 'partials/navbar_admin.njk' %}
                    {% elif user.role == 'brewery' %}
                    {% include 'partials/navbar_brewery.njk' %}
                    {% else %}
                    {% include 'partials/navbar_customer.njk' %}
                    {% endif %}
                    {% endif %}
                </td>
                <td width="20%" style="border: 1px solid black; text-align: center; font-size: 14px; color: #000;">
                    {% if user %}
                    {# Utente autenticato #}
                    <div style="display: flex; justify-content: center; align-items: center; gap: 16px;">
                        <a style="color:#000;font-size:14px; text-decoration: none;" href="/profile">
                            <div>
                                <span>
                                    <svg style="vertical-align:bottom" xmlns="http://www.w3.org/2000/svg" width="36px"
                                        height="36px" fill="#fff" viewbox="0 0 24 24">
                                    <path
                                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z" />
                                    </svg>
                                </span>
                            </div>
                            <div>
                                Profilo
                            </div>
                        </a>
                        <a style="color:#000;font-size:14px; text-decoration: none;" href="/logout">
                            <div>
                                <span>
                                    <svg style="vertical-align:bottom" xmlns="http://www.w3.org/2000/svg" width="36px"
                                        height="36px" fill="#000" viewbox="0 0 24 24">
                                    <path
                                        d="M5,5h6c0.55,0,1-0.45,1-1v0c0-0.55-0.45-1-1-1H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h6c0.55,0,1-0.45,1-1v0 c0-0.55-0.45-1-1-1H5V5z" />
                                    <path
                                        d="M20.65,11.65l-2.79-2.79C17.54,8.54,17,8.76,17,9.21V11h-7c-0.55,0-1,0.45-1,1v0c0,0.55,0.45,1,1,1h7v1.79 c0,0.45,0.54,0.67,0.85,0.35l2.79-2.79C20.84,12.16,20.84,11.84,20.65,11.65z" />
                                    </svg>
                                </span>
                            </div>
                            <div>
                                Esci
                            </div>
                        </a>
                    </div>
                    {% else %}
                    {# Utente non autenticato #}
                    <a style="color:#000;font-size:14px;text-decoration: none;" href="/login">
                        <div>
                            <span>
                                <svg style="vertical-align:bottom" xmlns="http://www.w3.org/2000/svg" width="36px"
                                    height="36px" fill="#000" viewbox="0 0 24 24">
                                    <path
                                        d="M10.3,7.7L10.3,7.7c-0.39,0.39-0.39,1.01,0,1.4l1.9,1.9H3c-0.55,0-1,0.45-1,1v0c0,0.55,0.45,1,1,1h9.2l-1.9,1.9 c-0.39,0.39-0.39,1.01,0,1.4l0,0c0.39,0.39,1.01,0.39,1.4,0l3.59-3.59c0.39-0.39,0.39-1.02,0-1.41L11.7,7.7 C11.31,7.31,10.69,7.31,10.3,7.7z M20,19h-7c-0.55,0-1,0.45-1,1v0c0,0.55,0.45,1,1,1h7c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-7 c-0.55,0-1,0.45-1,1v0c0,0.55,0.45,1,1,1h7V19z" />
                                </svg>
                            </span>
                        </div>
                        <div>
                            Entra
                        </div>
                    </a>
                    {% endif %}
                </td>
            </tr>
        </table>
        <p style="text-align: center; font-size: 8px;">&copy; 2023 SharingBeer2_0. Tutti i diritti riservati.</p>
    </footer>
    <script src="/js/scripts.js"></script>
    <script>
        window.onerror = function (message, source, lineno, colno, error) {
            console.error('Errore JavaScript:', message, source, lineno, colno, error);
        };
    </script>
</body>

</html>